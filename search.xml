<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>树形结构</title>
    <url>/2019/10/30/%E6%A0%91%E5%BD%A2%E7%BB%93%E6%9E%84/</url>
    <content><![CDATA[<h2 id="树形结构"><a href="#树形结构" class="headerlink" title="树形结构"></a>树形结构</h2><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSON;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">treeTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 树形类</span></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span></span>&#123;</span><br><span class="line">        <span class="keyword">private</span> String id;</span><br><span class="line">        <span class="keyword">private</span> String pid;</span><br><span class="line">        <span class="keyword">private</span> String name;</span><br><span class="line">        <span class="keyword">private</span> Set&lt;Node&gt; children;</span><br><span class="line"></span><br><span class="line">         Node(String id, String pid, String name)&#123;</span><br><span class="line">            <span class="keyword">this</span>.id = id;</span><br><span class="line">            <span class="keyword">this</span>.pid = pid;</span><br><span class="line">            <span class="keyword">this</span>.name = name;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">         Node()&#123;&#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> id;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(String id)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.id = id;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">getPid</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> pid;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPid</span><span class="params">(String pid)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.pid = pid;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Set&lt;Node&gt; <span class="title">getChildren</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> children;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setChildren</span><span class="params">(Set&lt;Node&gt; children)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.children = children;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> name;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.name = name;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 是否有子类</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> List&lt;Node&gt; <span class="title">hasChild</span><span class="params">(Node type,List&lt;Node&gt; list)</span></span>&#123;</span><br><span class="line">        List&lt;Node&gt; cList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(Node t :list)&#123;</span><br><span class="line">            <span class="keyword">if</span>(type.getId().equals(t.getPid()))&#123;</span><br><span class="line">                cList.add(t);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//是否有父类</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">hasParent</span><span class="params">(Node type,List&lt;Node&gt; list)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(type.getPid() == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">for</span>(Node t :list)&#123;</span><br><span class="line">            <span class="keyword">if</span>(type.getPid().equals(t.getId()))&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设值children</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setChildren</span><span class="params">(Node parent, Node children)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">null</span> == parent.getChildren())&#123;</span><br><span class="line">            Set&lt;Node&gt; cs = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">            cs.add(children);</span><br><span class="line">            parent.setChildren(cs);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            parent.getChildren().add(children);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">toTree</span><span class="params">(Node type,List&lt;Node&gt; childrenList,List&lt;Node&gt; list)</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(Node children : childrenList)&#123;</span><br><span class="line">            List&lt;Node&gt; child = hasChild(children,list);</span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">null</span> != child &amp;&amp; child.size() &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                setChildren(type,children);</span><br><span class="line">                toTree(children,child,list);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                setChildren(type,children);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        List&lt;Node&gt; dataList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        dataList.add(<span class="keyword">new</span> Node(<span class="string">"1"</span>,<span class="keyword">null</span>,<span class="string">"1"</span>));</span><br><span class="line">        dataList.add(<span class="keyword">new</span> Node(<span class="string">"2"</span>,<span class="string">"1"</span>,<span class="string">"1-1"</span>));</span><br><span class="line">        dataList.add(<span class="keyword">new</span> Node(<span class="string">"3"</span>,<span class="string">"1"</span>,<span class="string">"1-2"</span>));</span><br><span class="line">        dataList.add(<span class="keyword">new</span> Node(<span class="string">"4"</span>,<span class="string">"0"</span>,<span class="string">"2"</span>));</span><br><span class="line">        dataList.add(<span class="keyword">new</span> Node(<span class="string">"5"</span>,<span class="string">"4"</span>,<span class="string">"2-1"</span>));</span><br><span class="line">        dataList.add(<span class="keyword">new</span> Node(<span class="string">"6"</span>,<span class="string">"2"</span>,<span class="string">"1-1-1"</span>));</span><br><span class="line">        dataList.add(<span class="keyword">new</span> Node(<span class="string">"7"</span>,<span class="string">"6"</span>,<span class="string">"1-1-1-1"</span>));</span><br><span class="line">        dataList.add(<span class="keyword">new</span> Node(<span class="string">"8"</span>,<span class="string">"7"</span>,<span class="string">"1-1-1-1"</span>));</span><br><span class="line">        dataList.add(<span class="keyword">new</span> Node(<span class="string">"9"</span>,<span class="string">"8"</span>,<span class="string">"1-1-1-1-1"</span>));</span><br><span class="line"></span><br><span class="line">        List&lt;Node&gt; treeList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (Node type : dataList) &#123;</span><br><span class="line">            <span class="keyword">if</span>(!hasParent(type,dataList))&#123;</span><br><span class="line">                treeList.add(type);</span><br><span class="line">            &#125;</span><br><span class="line">            List&lt;Node&gt; children = hasChild(type,dataList);</span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">null</span> != children &amp;&amp; children.size() &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                toTree(type,children,dataList);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(JSON.toJSONString(treeList));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h2><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">[&#123;</span><br><span class="line">    <span class="attr">"children"</span>: [&#123;</span><br><span class="line">        <span class="attr">"children"</span>: [&#123;</span><br><span class="line">            <span class="attr">"children"</span>: [&#123;</span><br><span class="line">                <span class="attr">"children"</span>: [&#123;</span><br><span class="line">                    <span class="attr">"children"</span>: [&#123;</span><br><span class="line">                        <span class="attr">"id"</span>: <span class="string">"9"</span>,</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"1-1-1-1-1"</span>,</span><br><span class="line">                        <span class="attr">"pid"</span>: <span class="string">"8"</span></span><br><span class="line">                    &#125;],</span><br><span class="line">                    <span class="attr">"id"</span>: <span class="string">"8"</span>,</span><br><span class="line">                    <span class="attr">"name"</span>: <span class="string">"1-1-1-1"</span>,</span><br><span class="line">                    <span class="attr">"pid"</span>: <span class="string">"7"</span></span><br><span class="line">                &#125;],</span><br><span class="line">                <span class="attr">"id"</span>: <span class="string">"7"</span>,</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"1-1-1-1"</span>,</span><br><span class="line">                <span class="attr">"pid"</span>: <span class="string">"6"</span></span><br><span class="line">            &#125;],</span><br><span class="line">            <span class="attr">"id"</span>: <span class="string">"6"</span>,</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"1-1-1"</span>,</span><br><span class="line">            <span class="attr">"pid"</span>: <span class="string">"2"</span></span><br><span class="line">        &#125;],</span><br><span class="line">        <span class="attr">"id"</span>: <span class="string">"2"</span>,</span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"1-1"</span>,</span><br><span class="line">        <span class="attr">"pid"</span>: <span class="string">"1"</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">"id"</span>: <span class="string">"3"</span>,</span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"1-2"</span>,</span><br><span class="line">        <span class="attr">"pid"</span>: <span class="string">"1"</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="attr">"id"</span>: <span class="string">"1"</span>,</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"1"</span></span><br><span class="line">&#125;, &#123;</span><br><span class="line">    <span class="attr">"children"</span>: [&#123;</span><br><span class="line">        <span class="attr">"id"</span>: <span class="string">"5"</span>,</span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"2-1"</span>,</span><br><span class="line">        <span class="attr">"pid"</span>: <span class="string">"4"</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="attr">"id"</span>: <span class="string">"4"</span>,</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"2"</span>,</span><br><span class="line">    <span class="attr">"pid"</span>: <span class="string">"0"</span></span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>java基础</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>树形结构</tag>
      </tags>
  </entry>
</search>
